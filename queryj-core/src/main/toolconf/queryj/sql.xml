<?xml version="1.0"?>

<!DOCTYPE sql-list
[
  <!ELEMENT sql-list (sql+,parameter-list,result-list,property-list,flag-list)>
  <!ELEMENT sql (description,value,parameter-ref,result-ref?,connection-flags-ref?,statement-flags-ref?,resultset-flags-ref?)>
  <!ATTLIST sql
    id ID #REQUIRED
    dao CDATA #REQUIRED
    name CDATA #REQUIRED
    type (select | insert | update | delete | select-for-update) #REQUIRED
    implementation (mysql | oracle | postgres | odbc | all-jdbc | mock | xml | all) #REQUIRED
    validate (true | false) #REQUIRED>
  <!ELEMENT description (#PCDATA)>
  <!ELEMENT value (#PCDATA)>
  <!ELEMENT parameter-ref EMPTY>
  <!ATTLIST parameter-ref
    id IDREF #REQUIRED>
  <!ELEMENT result-ref EMPTY>
  <!ATTLIST result-ref
    id IDREF #REQUIRED>
  <!ELEMENT connection-flags-ref EMPTY>
  <!ATTLIST connection-flags-ref
    id IDREF #REQUIRED>
  <!ELEMENT statement-flags-ref EMPTY>
  <!ATTLIST statement-flags-ref
    id IDREF #REQUIRED>
  <!ELEMENT resultset-flags-ref EMPTY>
  <!ATTLIST resultset-flags-ref
    id IDREF #REQUIRED>
  <!ELEMENT parameter-list (parameter)*>
  <!ELEMENT parameter EMPTY>
  <!ATTLIST parameter
    id ID #REQUIRED
    index CDATA #REQUIRED
    type  CDATA #REQUIRED
    name  CDATA #REQUIRED
    validation-value CDATA #REQUIRED>
  <!ELEMENT result-list (result)*>
  <!ELEMENT result (property-ref)*>
  <!ATTLIST result
    id ID #REQUIRED
    class CDATA #IMPLIED
    matches (none | single | multiple) #REQUIRED
    provider CDATA #IMPLIED>
  <!ELEMENT property-ref EMPTY>
  <!ATTLIST property-ref
    id IDREF #REQUIRED>
  <!ELEMENT property-list (property)*>
  <!ELEMENT property EMPTY>
  <!ATTLIST property
    id ID #REQUIRED
    column_name CDATA #IMPLIED
    index CDATA #IMPLIED
    name CDATA #IMPLIED
    type CDATA #REQUIRED>
  <!ELEMENT flag-list (connection-flags*,statement-flags*,resultset-flags*)>
  <!ELEMENT connection-flags EMPTY>
  <!ATTLIST connection-flags
    id ID #REQUIRED
    transactionisolation (  TRANSACTION_NONE
                          | TRANSACTION_READ_COMMITTED
                          | TRANSACTION_READ_UNCOMMITTED
                          | TRANSACTION_REPEATABLE_READ
                          | TRANSACTION_SERIALIZABLE ) #REQUIRED>
  <!ELEMENT statement-flags EMPTY>
  <!ATTLIST statement-flags
    id ID #REQUIRED
    autogeneratedkeys (NO_GENERATED_KEYS | RETURN_GENERATED_KEYS) #IMPLIED
    fetchsize CDATA #IMPLIED
    maxfieldsize CDATA #IMPLIED
    maxrows CDATA #IMPLIED
    querytimeout CDATA #IMPLIED
    fetchdirection (FETCH_FORWARD | FETCH_REVERSE | FETCH_UNKNOWN) #IMPLIED
    escapeprocessing (true | false) #IMPLIED
    moreresults (CLOSE_CURRENT_RESULT | KEEP_CURRENT_RESULT | CLOSE_ALL_RESULTS) #IMPLIED
    cursorname CDATA #IMPLIED>
  <!ELEMENT resultset-flags EMPTY>
  <!ATTLIST resultset-flags
    id ID #REQUIRED
    type (TYPE_FORWARD_ONLY | TYPE_SCROLL_INSENSITIVE | TYPE_SCROLL_SENSITIVE) #IMPLIED
    concurrency (CONCUR_READ_ONLY | CONCUR_UPDATABLE) #IMPLIED
    holdability (HOLD_CURSORS_OVER_COMMIT | CLOSE_CURSORS_AT_COMMIT) #IMPLIED>
]>

<sql-list>
  <sql
    id="test-query"
    dao="q_sql"
    name="test-query"
    type="select"
    implementation="all"
    validate="true">
    <description>Test query</description>
    <value>select * from q_sql where sql_id = ?</value>
    <parameter-ref id="long-parameter-1"/>
    <result-ref id="multiple.q_sql.result"/>
  </sql>

  <parameter-list>
    <parameter
      id="long-parameter-1"
      index="1"
      type="long"
      name="id"
      validation-value="987"/>
  </parameter-list>

  <result-list>
    <result
      id="multiple.q_sql.result"
      class="org.acmsl.queryj.customsql.QSqlValueObject"
      matches="multiple">
      <property-ref
        id="q_sql.sql_id.property"/>
      <property-ref
        id="q_sql.implementation_id.property"/>
      <property-ref
        id="q_sql.query_type_id.property"/>
      <property-ref
        id="q_sql.result_id.property"/>
      <property-ref
        id="q_sql.validate.property"/>
      <property-ref
        id="q_sql.value.property"/>
      <property-ref
        id="q_sql.last_modified.property"/>
      <property-ref
        id="q_sql.creation_date.property"/>
    </result>
  </result-list>

  <property-list>
    <property
      id="q_sql.sql_id.property"
      column_name="sql_id"
      type="long"/>
    <property
      id="q_sql.implementation_id.property"
      column_name="implementation_id"
      type="long"/>
    <property
      id="q_sql.query_type_id.property"
      column_name="query_type_id"
      type="long"/>
    <property
      id="q_sql.result_id.property"
      column_name="result_id"
      type="long"/>
    <property
      id="q_sql.validate.property"
      column_name="validate"
      type="int"/>
    <property
      id="q_sql.value.property"
      column_name="value"
      type="String"/>
    <property
      id="q_sql.last_modified.property"
      column_name="last_modified"
      type="Date"/>
    <property
      id="q_sql.creation_date.property"
      column_name="creation_date"
      type="Date"/>
  </property-list>

  <flag-list>
    <connection-flags
      id="connection-flags.find-by-primary-key"
      transactionisolation="TRANSACTION_READ_COMMITTED"/>
    <connection-flags
      id="connection-flags.default"
      transactionisolation="TRANSACTION_NONE"/>
    <connection-flags
      id="connection-flag-transaction-none"
      transactionisolation="TRANSACTION_NONE"/>
    <connection-flags
      id="connection-flag-transaction-read-committed"
      transactionisolation="TRANSACTION_READ_COMMITTED"/>
    <connection-flags
      id="connection-flag-transaction-read-uncommitted"
      transactionisolation="TRANSACTION_READ_UNCOMMITTED"/>
    <connection-flags
      id="connection-flag-transaction-repeatable-read"
      transactionisolation="TRANSACTION_REPEATABLE_READ"/>
    <connection-flags
      id="connection-flag-transaction-serializable"
      transactionisolation="TRANSACTION_TRANSACTION_SERIALIZABLE"/>
    <statement-flags
      id="statement-flags.default"
      autogeneratedkeys="NO_GENERATED_KEYS"/>
    <statement-flags
      id="find-customer-for-update-statement-flags"
      autogeneratedkeys="NO_GENERATED_KEYS"
      fetchsize="10"
      maxfieldsize="1000"
      maxrows="10"
      querytimeout="30"
      fetchdirection="FETCH_FORWARD"
      escapeprocessing="false"
      moreresults="CLOSE_ALL_RESULTS"/>
    <resultset-flags
      id="resultset-flags.default"
      type="TYPE_FORWARD_ONLY"
      concurrency="CONCUR_UPDATABLE"
      holdability="CLOSE_CURSORS_AT_COMMIT"/>
    <resultset-flags
      id="find-customer-for-update-resultset-flags"
      type="TYPE_FORWARD_ONLY"
      concurrency="CONCUR_UPDATABLE"
      holdability="CLOSE_CURSORS_AT_COMMIT"/>
  </flag-list>
</sql-list>
